"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var misc_utils_of_mine_generic_1 = require("misc-utils-of-mine-generic");
var path_1 = require("path");
var util_1 = require("./util");
var Viz_ = require('viz.js');
var Viz = typeof Viz_ !== 'function' ? Viz_.default : Viz_;
var worker;
var viz;
function terminateLibrary() {
    worker && worker.terminate();
    worker = undefined;
    viz = undefined;
}
exports.terminateLibrary = terminateLibrary;
function getLibrary() {
    if (!worker) {
        if (misc_utils_of_mine_generic_1.isNode() && typeof document === 'undefined') {
            var TWorker = require('tiny-worker');
            worker = new TWorker(path_1.resolve(path_1.join(util_1.getPackageJsonFolder() || '.', 'dist', 'src', 'full.render.js')));
        }
        else {
            worker = new Worker('full.render.js');
        }
    }
    if (!viz) {
        viz = new Viz({ worker: worker });
    }
    return viz;
}
exports.getLibrary = getLibrary;
//# sourceMappingURL=library.js.map